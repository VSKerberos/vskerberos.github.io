"use strict";(self.webpackChunkcost_calculator=self.webpackChunkcost_calculator||[]).push([[238],{1238:(tt,y,a)=>{a.r(y),a.d(y,{CategoryModule:()=>V});var m=a(607),x=a(6019),T=a(5210),C=a(9843),A=a(8363),F=a(2770),h=a(4833);const p=(0,F.H)(),b=p.getInitialState(),D=(0,m.Lq)(b,(0,m.on)(h.b,(e,i)=>p.setAll(i.categories,e))),{selectAll:U}=p.getSelectors(),M=(0,m.ZF)("categories"),S=(0,m.P1)(M,U);var n=a(9133),R=a(4069),s=a(1292),t=a(3668);let Y=(()=>{class e{constructor(o,r){this.dialogRef=o,this.data=r}ngOnInit(){}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(s.so),t.Y36(s.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-confirm-dialog"]],decls:7,vars:4,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[2,"float","right","margin","20px"],["type","button","value","Sil","color","primary","mat-raised-button","",2,"margin","0px 10px",3,"mat-dialog-close"],["type","button","value","\u0130ptal","color","secondary","mat-raised-button","",3,"mat-dialog-close"]],template:function(o,r){1&o&&(t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1),t._uU(3),t.qZA(),t.TgZ(4,"div",2),t._UZ(5,"input",3),t._UZ(6,"input",4),t.qZA()),2&o&&(t.xp6(1),t.Oqu(r.data.title),t.xp6(2),t.hij(" ",r.data.message,"\n"),t.xp6(2),t.Q6J("mat-dialog-close",!0),t.xp6(1),t.Q6J("mat-dialog-close",!1))},directives:[s.uh,s.xY,s.ZT],styles:[""]}),e})();var Z=a(4817),f=a(5243),g=a(1893),J=a(2204),I=a(5093),l=a(282),Q=a(5038),$=a(2450);function z(e,i){1&e&&(t.TgZ(0,"th",19),t._uU(1," Kategori Kodu "),t.qZA())}function N(e,i){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.hij(" ",o.categoryid," ")}}function B(e,i){1&e&&(t.TgZ(0,"th",19),t._uU(1," Kategori Ad\u0131 "),t.qZA())}function L(e,i){if(1&e&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&e){const o=i.$implicit;t.xp6(1),t.hij(" ",o.title," ")}}function q(e,i){1&e&&(t.TgZ(0,"th",19),t._uU(1," \u0130\u015flem B\xf6l\xfcm\xfc"),t.qZA())}function w(e,i){if(1&e){const o=t.EpF();t.TgZ(0,"md-cell"),t.TgZ(1,"button",21),t.NdJ("click",function(){const d=t.CHM(o).$implicit;return t.oxw().updateRecord(d)}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA(),t.qZA(),t.TgZ(4,"button",22),t.NdJ("click",function(){const d=t.CHM(o).$implicit;return t.oxw().deleteRecord(d.id)}),t.TgZ(5,"mat-icon"),t._uU(6,"delete_outline"),t.qZA(),t.qZA(),t.qZA()}}function H(e,i){1&e&&t._UZ(0,"tr",23)}function O(e,i){1&e&&t._UZ(0,"tr",24)}let P=(()=>{class e{constructor(o,r,c,d){this.firebaseService=o,this.fb=r,this.dialog=c,this.store=d,this.displayedColumns=["position","name","demo-actions"],this.reactiveForm()}ngOnInit(){this.getItems()}getItems(){this.categories$=this.store.pipe((0,m.Ys)(S)),this.categories$=this.categories$.pipe((0,R.UI)(o=>(o.sort(this.sortByTitle),o))),this.dataSource=this.categories$,this.mode="create"}reactiveForm(){this.categoryForm=this.fb.group({title:["",[n.kI.required,n.kI.minLength(3),n.kI.maxLength(50)]]})}submitForm(){"create"==this.mode?(this.localCategory={categoryid:this.getMaxCategoryId(),title:this.categoryForm.controls.title.value,remarks:""},this.firebaseService.addCategory(this.localCategory).catch(o=>{console.log(o)})):(this.localCategory={categoryid:this.updatedRecord.categoryid,title:this.categoryForm.controls.title.value,remarks:""},this.firebaseService.updateCategory(this.localCategory,this.updatedRecord.id).catch(o=>{console.log(o)})),this.categoryForm.reset(),this.categoryForm.markAsPristine(),this.categoryForm.markAsUntouched(),this.localCategory=null,this.mode="create",this.updatedRecord=null,this.getItems()}cancel(){this.categoryForm.reset(),this.categoryForm.markAsPristine(),this.categoryForm.markAsUntouched(),this.localCategory=null,this.mode="create",this.updatedRecord=null}getMaxCategoryId(){return this.categories$.subscribe(o=>{this.categoryArr=o}),Math.max.apply(Math,this.categoryArr.map(function(o){return o.categoryid}))+1}deleteRecord(o){console.log("Deleted recor is: "+o),this.dialog.open(Y,{data:{title:"Category Silme Do\u011frulama",message:"Silmek istedi\u011finizden emin misiniz?"}}).afterClosed().subscribe(c=>{!0===c&&(this.firebaseService.deleteCategorie(o),this.mode="create",this.getItems())})}updateRecord(o){this.mode="update",this.categoryForm.patchValue({title:o.title}),this.updatedRecord=o}sortByTitle(o,r){return r.title>o.title?-1:r.title<o.title?1:0}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(Z.D),t.Y36(n.qu),t.Y36(s.uw),t.Y36(m.yh))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-category"]],decls:32,vars:10,consts:[[1,"container"],["fxLayoutAlign","center center",1,"mat-display-3","special-header"],["fxLayout","row","fxLayoutAlign","center none",1,"container"],["fxFlex","95%"],["autocomplete","off",3,"formGroup","ngSubmit"],["mat-dialog-title",""],[1,"row"],[3,"formControl","label","error","minlength","maxlength"],["color","primary","mat-raised-button","",3,"disabled"],["color","secondary","mat-raised-button","",3,"click"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","demo-actions"],[4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary","matTooltip","G\xfcncelle","matTooltipPosition","right","aria-label","Example icon button with a home icon",3,"click"],["mat-icon-button","","color","warn","matTooltip","Sil","matTooltipPosition","right","aria-label","Example icon button with a home icon",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(o,r){1&o&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t._uU(2," Kategori Tan\u0131mlama "),t.qZA(),t.TgZ(3,"mat-dialog-content"),t.TgZ(4,"div",2),t.TgZ(5,"div",3),t.TgZ(6,"form",4),t.NdJ("ngSubmit",function(){return r.categoryForm.valid&&r.submitForm()}),t.TgZ(7,"mat-card"),t.TgZ(8,"mat-card-header"),t.TgZ(9,"mat-card-title"),t._UZ(10,"h2",5),t.qZA(),t.qZA(),t.TgZ(11,"mat-card-content"),t.TgZ(12,"div",6),t.TgZ(13,"div"),t._UZ(14,"app-text-input",7),t.qZA(),t.qZA(),t.qZA(),t.TgZ(15,"mat-card-actions"),t.TgZ(16,"button",8),t._uU(17," Kaydet "),t.qZA(),t.TgZ(18,"button",9),t.NdJ("click",function(){return r.cancel()}),t._uU(19," Temizle "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(20,"table",10),t.ynx(21,11),t.YNc(22,z,2,0,"th",12),t.YNc(23,N,2,1,"td",13),t.BQk(),t.ynx(24,14),t.YNc(25,B,2,0,"th",12),t.YNc(26,L,2,1,"td",13),t.BQk(),t.ynx(27,15),t.YNc(28,q,2,0,"th",12),t.YNc(29,w,7,0,"md-cell",16),t.BQk(),t.YNc(30,H,1,0,"tr",17),t.YNc(31,O,1,0,"tr",18),t.qZA()),2&o&&(t.xp6(6),t.Q6J("formGroup",r.categoryForm),t.xp6(8),t.Q6J("formControl",r.categoryForm.controls.title)("label","Kategori ad\u0131")("error","L\xfctfen kategori ad\u0131 giriniz")("minlength","3")("maxlength","40"),t.xp6(2),t.Q6J("disabled",!r.categoryForm.valid),t.xp6(4),t.Q6J("dataSource",r.dataSource),t.xp6(10),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns))},directives:[f.Wh,s.xY,f.xw,f.yH,n._Y,n.JL,n.sg,g.a8,g.dk,g.n5,s.uh,g.dn,J.t,n.JJ,n.oH,n.wO,n.nD,g.hq,I.lW,l.BZ,l.w1,l.fO,l.Dz,l.as,l.nj,l.ge,l.ev,Q.gM,$.Hw,l.XQ,l.Gk],styles:['table[_ngcontent-%COMP%]{width:95%;margin:40px auto 0}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:large;font-weight:bold}.special-header[_ngcontent-%COMP%]{margin:1em 0 .5em;color:#343434;font-weight:normal;font-family:"Ultra",sans-serif;font-size:36px;line-height:42px;text-transform:uppercase;text-shadow:0 2px white,0 3px #777}']}),e})();var v=a(5568);const G=[{path:"",component:A.$,children:[{path:"",component:P}]}];let j=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[v.e],imports:[[C.Bz.forChild(G)],C.Bz]}),e})();var u=a(1410),E=a(6700),K=a(8053);let k=(()=>{class e{constructor(o,r){this.actions$=o,this.service=r,this.loadCategories$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(h.R),(0,E.b)(c=>this.service.getCategories()),(0,K.U)(c=>(0,h.b)({categories:c}))))}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(u.eX),t.LFG(Z.D))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var W=a(5394);const X={Category:{}};let V=(()=>{class e{constructor(o){this.eds=o,o.registerMetadataMap(X)}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(W.f0))},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[v.e],imports:[[x.ez,T.m,j,u.sQ.forFeature([k]),m.Aw.forFeature("categories",D)]]}),e})()}}]);